/*
*
*  CubeMap
*
* Baseado no MyUnitCube da TP03
*/

class MyCubeMap extends CGFobject{
    constructor(scene,texture){

        super(scene);
        this.initBuffers();
        this.texture=texture;

    }

    initBuffers(){

        this.vertices = [
            -0.5, -0.5,  0.5,   // 0
             0.5, -0.5,  0.5,   // 1
             0.5, -0.5, -0.5,   // 2
            -0.5, -0.5, -0.5,   // 3
            -0.5,  0.5,  0.5,   // 4
             0.5,  0.5,  0.5,   // 5
             0.5,  0.5, -0.5,   // 6
            -0.5,  0.5, -0.5,   // 7

            -0.5, -0.5,  0.5,   // 0
             0.5, -0.5,  0.5,   // 1
             0.5, -0.5, -0.5,   // 2
            -0.5, -0.5, -0.5,   // 3
            -0.5,  0.5,  0.5,   // 4
             0.5,  0.5,  0.5,   // 5
             0.5,  0.5, -0.5,   // 6
            -0.5,  0.5, -0.5,   // 7

            -0.5, -0.5,  0.5,   // 0
             0.5, -0.5,  0.5,   // 1
             0.5, -0.5, -0.5,   // 2
            -0.5, -0.5, -0.5,   // 3
            -0.5,  0.5,  0.5,   // 4
             0.5,  0.5,  0.5,   // 5
             0.5,  0.5, -0.5,   // 6
            -0.5,  0.5, -0.5,   // 7
        ];
        
        this.normals = [
            -1.0,  0.0,  0.0,
             1.0,  0.0,  0.0,
             1.0,  0.0,  0.0,
            -1.0,  0.0,  0.0,
            -1.0,  0.0,  0.0,
             1.0,  0.0,  0.0,
             1.0,  0.0,  0.0,
            -1.0,  0.0,  0.0,

             0.0, -1.0,  0.0,
             0.0, -1.0,  0.0,
             0.0, -1.0,  0.0,
             0.0, -1.0,  0.0,
             0.0,  1.0,  0.0,
             0.0,  1.0,  0.0,
             0.0,  1.0,  0.0,
             0.0,  1.0,  0.0,

             0.0,  0.0,  1.0,
             0.0,  0.0,  1.0,
             0.0,  0.0, -1.0,
             0.0,  0.0, -1.0,
             0.0,  0.0,  1.0,
             0.0,  0.0,  1.0,
             0.0,  0.0, -1.0,
             0.0,  0.0, -1.0
        ];

        this.indices=[
             /* y = -0.5 // XZ */
             1, 2, 0,
             2, 3, 0,

             /* y =  0.5 // XZ */
             6, 5, 4,
             4, 7, 6,

             /* z =  0.5 // XY */
             5, 1, 0,
             0, 4, 5,

             /* z = -0.5 // XY */
             3, 2, 6,
             6, 7, 3,

             /* x =  0.5 // YZ */
             1, 5, 6,
             6, 2, 1,

             /* x = -0.5 // YZ */
             3, 7, 4,
             4, 0, 3
        ];


        	/*
		Texture coords (s,t)
		+----------> s
        |
        |
		|
		v
        t
        */


        this.texCoords=[

            //up and down
                (2.0/4.0),1, 
                (3.0/4.0),1,
                (3.0/4.0),(2.0/3.0),
                (2.0/4.0),(2.0/3.0),
                (2.0/4.0),0,
                (3.0/4.0),0,
                (3.0/4.0),(1.0/3.0),
                (2.0/4.0),(1.0/3.0),


            //front and back
                (1.0/4.0),(2.0/3.0),
                0,(2.0/3.0),
                (3.0/4.0),(2.0/3.0),
                (2.0/4.0),(2.0/3.0),
                (1.0/4.0),(1.0/3.0),
                0,(1.0/3.0),
                (3.0/4.0),(1.0/3.0),
                (2.0/4.0),(1.0/3.0),

            //right and left
                (1.0/4.0),(2.0/3.0),
                1,(2.0/3.0),
                (3.0/4.0),(2.0/3.0),
                (2.0/4.0),(2.0/3.0),
                (1.0/4.0),(1.0/3.0),
                1,(1.0/3.0),
                (3.0/4.0),(1.0/3.0),
                (2.0/4.0),(1.0/3.0)

        ];

        this.primitiveType = this.scene.gl.TRIANGLES;
        this.initGLBuffers();
    }



    display(){
        this.scene.pushMatrix();
        this.scene.scale(5,5,5);
        this.texture.apply();
        this.scene.display();
        this.scene.popMatrix();
    }  
}